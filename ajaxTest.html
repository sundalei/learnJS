<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
function success(text) {
    var textarea = document.getElementById('test-response-text');
    textarea.value = text;
}

function fail(code) {
    var textarea = document.getElementById('test-response-text');
    textarea.value = 'Error code: ' + code;
}

function refreshPrice(data) {
    var p = document.getElementById('test-jsonp');
    p.innerHTML = 'Current Price：' +
        data['0000001'].name +': ' + 
        data['0000001'].price + '；' +
        data['1399001'].name + ': ' +
        data['1399001'].price;
}

function checkForm() {
	var request;
	if (window.XMLHttpRequest) {
	    request = new XMLHttpRequest();
	} else {
	    request = new ActiveXObject('Microsoft.XMLHTTP');
	}
	
	var js = document.createElement('script');
	var head = document.getElementsByTagName('head')[0];
	js.src = 'http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice';
	head.appendChild(js);
	
	request.onreadystatechange = function() {
		if(request.readyState === 4) {
			if(request.status === 200) {
				return success(request.responseText);
			} else {
				return fail(request.status);
			}
		}
	}
	request.open('GET', 'TestServlet');
	request.send();
	alert(request);
}
</script>
</head>
<body>
	<form action="" id="test-form" onsubmit="return checkForm()">
		<input type="button" value="button" id="button" onclick="checkForm()">
	</form>
	<textarea id="test-response-text" style="width: 90%; margin: 15px 0; resize: none;" rows="5">response： </textarea>
	<p id="test-jsonp"></p>
</body>
</html>